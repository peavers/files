apply plugin: 'org.springframework.boot'
apply plugin: 'com.google.cloud.tools.jib'

dependencies {
    implementation project(':autotools-frontend')
    implementation project(':autotools-data')

    implementation project(':rule-copy-media')
    implementation project(':rule-delete-directories')
    implementation project(':rule-delete-files')
    implementation project(':rule-duplicate-media')
}

jib {
    to {
        image = 'peavers/autotools'
        auth {
            username = System.getenv("DOCKER_USER")
            password = System.getenv("DOCKER_PASS")
        }
        tags = ["latest"]
    }
    container {
        jvmFlags = ['-XX:+UseContainerSupport']
        labels = [maintainer: 'Chris Turner<chris@codacy.com>']
    }
}
